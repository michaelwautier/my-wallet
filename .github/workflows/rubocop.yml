# This workflow uses actions that are not certified by GitHub.
# They are provided by a third-party and are governed by
# separate terms of service, privacy policy, and support
# documentation.

# pulled from repo
name: Rubocop

on:
  pull_request:
    # The branches below must be a subset of the branches above
    branches: [ '*', '*/*' ]
    types: [ opened, synchronize, reopened, ready_for_review ]
  schedule:
    - cron: '15 11 * * 2'

jobs:
  rubocop:
    if: github.event.pull_request.draft == false

    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      # If running on a self-hosted runner, check it meets the requirements
      # listed at https://github.com/ruby/setup-ruby#using-self-hosted-runners
      - name: Set up Ruby
        uses: ruby/setup-ruby@55283cc23133118229fd3f97f9336ee23a179fcf # v1.146.0
        with:
          bundler-cache: true

      - name: Install dependencies
        run: bundle install

      - name: Rubocop run
        run: bundle exec rubocop
